<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Explore Pa√≠ses ‚Äî Busca Animada üåç</title>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-1: #eaf3fc;
            --bg-2: #f6fbff;
            --accent: #3f86d6;
            --muted: #6f7f93;
            --card: #ffffff;
            --glass: rgba(255, 255, 255, 0.6);
            --glass-strong: rgba(255, 255, 255, 0.85);
            --shadow: 0 10px 30px rgba(47, 72, 88, 0.08);
        }

        * {
            box-sizing: border-box
        }

        html,
        body {
            height: 100%
        }

        body {
            margin: 0;
            min-height: 100%;
            font-family: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            background: linear-gradient(160deg, var(--bg-2), var(--bg-1));
            display: flex;
            align-items: flex-start;
            justify-content: center;
            color: #123;
            padding: 36px 20px;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
        }

        /* Container */
        .app {
            width: 100%;
            max-width: 1120px;
            margin: 0 auto;
            position: relative;
            z-index: 2;
        }

        /* Animated flags background layer */
        .flags-bg {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
            opacity: 0.16;
            filter: saturate(0.95) contrast(1.02);
        }

        .flag-bubble {
            position: absolute;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            width: 56px;
            height: 56px;
            transform-origin: center;
            border-radius: 10px;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.85), rgba(255, 255, 255, 0.72));
            border: 1px solid rgba(0, 0, 0, 0.04);
            box-shadow: 0 6px 18px rgba(12, 32, 64, 0.06);
            animation: floatUp linear infinite;
            will-change: transform, opacity;
            backface-visibility: hidden;
        }

        @keyframes floatUp {
            from {
                transform: translateY(40vh) rotate(0deg);
                opacity: 0;
            }

            10% {
                opacity: 1;
            }

            to {
                transform: translateY(-20vh) rotate(360deg);
                opacity: 0.6;
            }
        }

        /* Header */
        header.header {
            display: flex;
            align-items: center;
            gap: 18px;
            margin-bottom: 18px;
            z-index: 3;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 12px;
            background: linear-gradient(90deg, var(--glass), var(--glass-strong));
            padding: 12px 16px;
            border-radius: 14px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(64, 119, 204, 0.08);
        }

        .globe {
            width: 46px;
            height: 46px;
            display: grid;
            place-items: center;
            background: radial-gradient(circle at 30% 30%, rgba(63, 134, 214, 0.15), transparent 40%);
            border-radius: 10px;
            font-size: 20px;
            color: var(--accent);
            border: 1px solid rgba(63, 134, 214, 0.12);
        }

        h1 {
            margin: 0;
            font-size: 22px;
            letter-spacing: -0.02em;
            font-weight: 700;
            color: #123a57;
        }

        .subtitle {
            margin: 0;
            font-size: 13px;
            color: var(--muted);
            margin-left: 4px;
            font-weight: 500;
        }

        /* Search area */
        .controls {
            margin-top: 14px;
            display: flex;
            gap: 12px;
            align-items: center;
            z-index: 3;
        }

        .search-wrap {
            position: relative;
            width: 420px;
            max-width: 100%;
        }

        .search {
            width: 100%;
            padding: 14px 46px 14px 46px;
            border-radius: 12px;
            border: 1px solid rgba(18, 58, 88, 0.06);
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.8));
            box-shadow: 0 10px 30px rgba(12, 32, 64, 0.04);
            font-size: 15px;
            color: #123a57;
            outline: none;
            transition: box-shadow 220ms, transform 220ms, border-color 220ms;
        }

        .search::placeholder {
            color: #84a0bf;
            font-weight: 500;
        }

        .search:focus {
            transform: translateY(-2px);
            box-shadow: 0 12px 30px rgba(19, 58, 110, 0.12);
            border-color: rgba(63, 134, 214, 0.46);
        }

        .icon-left {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            width: 30px;
            height: 30px;
            display: grid;
            place-items: center;
            color: var(--accent);
            opacity: 0.95;
            pointer-events: none;
            font-size: 18px;
        }

        .clear-btn {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            background: transparent;
            border: none;
            width: 34px;
            height: 34px;
            border-radius: 8px;
            display: grid;
            place-items: center;
            cursor: pointer;
            opacity: 0.6;
        }

        .clear-btn:hover {
            background: rgba(18, 58, 88, 0.04);
            opacity: 1
        }

        /* Results area */
        .results {
            margin-top: 24px;
            display: flex;
            gap: 18px;
            flex-wrap: wrap;
            z-index: 3;
            align-items: flex-start;
        }

        .card {
            width: 230px;
            background: var(--card);
            border-radius: 12px;
            padding: 14px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(14, 30, 60, 0.04);
            cursor: pointer;
            transform: translateY(16px);
            opacity: 0;
            transition: transform 280ms cubic-bezier(.2, .9, .3, 1), box-shadow 220ms;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .card:hover {
            transform: translateY(-6px);
            box-shadow: 0 18px 40px rgba(32, 68, 120, 0.12);
            border-color: rgba(63, 134, 214, 0.08)
        }

        .card .flag {
            width: 100%;
            height: 120px;
            border-radius: 10px;
            background: linear-gradient(180deg, #f5fbff, #eef7ff);
            border: 1px solid rgba(2, 24, 72, 0.03);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            overflow: hidden;
        }

        .card .name {
            font-weight: 600;
            font-size: 16px;
            color: #10283b;
        }

        .meta {
            font-size: 13px;
            color: var(--muted);
        }

        /* Loader */
        .loader {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: grid;
            place-items: center;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.85));
            border: 1px solid rgba(14, 30, 60, 0.04);
            box-shadow: var(--shadow);
        }

        .spinner {
            width: 26px;
            height: 26px;
            border-radius: 50%;
            border: 3px solid rgba(63, 134, 214, 0.2);
            border-top-color: var(--accent);
            animation: spin 0.9s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg)
            }
        }

        /* Modal (details) */
        .modal {
            position: fixed;
            inset: 0;
            display: none;
            align-items: center;
            justify-content: center;
            background: linear-gradient(180deg, rgba(6, 12, 28, 0.45), rgba(6, 12, 28, 0.35));
            z-index: 20;
            padding: 20px;
            backdrop-filter: blur(4px);
        }

        .modal.show {
            display: flex;
        }

        .modal-card {
            width: 520px;
            max-width: 96%;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.98), rgba(250, 252, 255, 0.98));
            border-radius: 14px;
            padding: 20px;
            box-shadow: 0 26px 60px rgba(12, 32, 64, 0.3);
            transform: translateY(18px) scale(0.98);
            opacity: 0;
            transition: transform 280ms cubic-bezier(.2, .9, .3, 1), opacity 220ms;
        }

        .modal.show .modal-card {
            transform: translateY(0) scale(1);
            opacity: 1;
        }

        .modal-top {
            display: flex;
            gap: 14px;
            align-items: center;
        }

        .modal-flag {
            width: 120px;
            height: 84px;
            border-radius: 10px;
            font-size: 52px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(180deg, #f5fbff, #eef7ff);
            border: 1px solid rgba(2, 24, 72, 0.03)
        }

        .modal-title {
            font-weight: 700;
            font-size: 20px;
            color: #10283b;
            margin: 0;
        }

        .modal-sub {
            color: var(--muted);
            font-size: 13px;
            margin-top: 6px;
        }

        .modal-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 14px;
        }

        .k {
            font-weight: 600;
            color: #294358;
            font-size: 13px
        }

        .v {
            color: var(--muted);
            font-size: 13px
        }

        .close {
            position: absolute;
            right: 14px;
            top: 12px;
            width: 40px;
            height: 40px;
            border-radius: 10px;
            border: none;
            display: grid;
            place-items: center;
            background: transparent;
            color: var(--accent);
            font-size: 18px;
            cursor: pointer;
            transition: transform 160ms, background 160ms;
        }

        .close:hover {
            transform: rotate(90deg);
            background: rgba(63, 134, 214, 0.06)
        }

        /* footer note */
        .note {
            margin-top: 10px;
            color: var(--muted);
            font-size: 13px;
        }

        /* cascade animation helper (JS will set delay) */
        .visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* responsive tweaks */
        @media (max-width:760px) {
            .modal-card {
                width: 92%
            }

            .modal-grid {
                grid-template-columns: 1fr
            }

            .search {
                padding-left: 44px;
                padding-right: 36px;
            }

            .brand {
                display: none
            }

            header.header {
                gap: 8px
            }
        }
    </style>
</head>

<body>

    <!-- animated flags background (generated by JS) -->
    <div class="flags-bg" id="flags-bg" aria-hidden="true"></div>

    <div class="app" role="application" aria-label="Explorar pa√≠ses">

        <header class="header" role="banner">
            <div class="brand" aria-hidden="true">
                <div class="globe" title="Explore"><svg width="22" height="22" viewBox="0 0 24 24" fill="none"
                        aria-hidden="true">
                        <path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20z" stroke="#3f86d6" stroke-width="1.4"
                            stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M2 12h20M12 2c2.2 3 2.2 9 0 12M12 22c2.2-3 2.2-9 0-12" stroke="#3f86d6"
                            stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg></div>
                <div>
                    <h1>Explore Pa√≠ses</h1>
                    <div class="subtitle">Busque, descubra e explore dados principais de cada pa√≠s</div>
                </div>
            </div>
        </header>

        <div class="controls" role="search" aria-label="Busca de pa√≠ses">
            <div class="search-wrap">
                <div class="icon-left" aria-hidden="true">
                    <!-- magnifier SVG -->
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                        <path d="M21 21l-4.35-4.35" stroke="#3f86d6" stroke-width="1.6" stroke-linecap="round"
                            stroke-linejoin="round" />
                        <circle cx="11" cy="11" r="6" stroke="#3f86d6" stroke-width="1.6" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                </div>
                <input id="search" class="search" type="text"
                    placeholder="Digite o nome do pa√≠s (ex: Brasil, Japan, united)..." aria-label="Pesquisar pa√≠s">
                <button id="clearBtn" class="clear-btn" title="Limpar pesquisa" aria-label="Limpar pesquisa"
                    style="display:none">‚úï</button>
            </div>

            <div id="status" style="display:flex;align-items:center;gap:12px">
                <div id="loaderWrap" style="display:none">
                    <div class="loader">
                        <div class="spinner" aria-hidden="true"></div>
                    </div>
                </div>
            </div>
        </div>

        <main>
            <div id="results" class="results" aria-live="polite" aria-atomic="true"></div>
            <div id="emptyNote" class="note" style="display:none">Digite ao menos 2 caracteres para iniciar a busca ‚Äî
                por exemplo: <strong>bra</strong>, <strong>uni</strong>, <strong>indi</strong>.</div>
        </main>
    </div>

    <!-- modal details -->
    <div id="modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
        <div class="modal-card" role="document">
            <button class="close" id="modalClose" title="Fechar">‚úï</button>
            <div class="modal-top">
                <div class="modal-flag" id="modalFlag">üè≥Ô∏è</div>
                <div>
                    <h3 class="modal-title" id="modalName">Pa√≠s</h3>
                    <div class="modal-sub" id="modalSubtitle">Informa√ß√µes detalhadas</div>
                </div>
            </div>

            <div class="modal-grid" id="modalGrid">
                <div>
                    <div class="k">Capital</div>
                    <div class="v" id="modalCapital">‚Äî</div>
                </div>
                <div>
                    <div class="k">Regi√£o</div>
                    <div class="v" id="modalRegion">‚Äî</div>
                </div>
                <div>
                    <div class="k">Popula√ß√£o</div>
                    <div class="v" id="modalPop">‚Äî</div>
                </div>
                <div>
                    <div class="k">√Årea (km¬≤)</div>
                    <div class="v" id="modalArea">‚Äî</div>
                </div>
                <div>
                    <div class="k">Idiomas</div>
                    <div class="v" id="modalLang">‚Äî</div>
                </div>
                <div>
                    <div class="k">Moedas</div>
                    <div class="v" id="modalCur">‚Äî</div>
                </div>
            </div>

            <p class="note" style="margin-top:14px">A API usada fornece dados oficiais como capital, popula√ß√£o, √°rea,
                idiomas e moedas. <strong>Maiores/menores cidades</strong> n√£o s√£o disponibilizadas por esta API ‚Äî para
                isso seria preciso integrar uma API de cidades (ex: GeoDB ou Wikipedia).</p>
        </div>
    </div>

    <script>
        // --- Helpers & elements
        const searchInput = document.getElementById('search');
        const resultsEl = document.getElementById('results');
        const loaderWrap = document.getElementById('loaderWrap');
        const emptyNote = document.getElementById('emptyNote');
        const clearBtn = document.getElementById('clearBtn');

        const modal = document.getElementById('modal');
        const modalClose = document.getElementById('modalClose');
        const modalFlag = document.getElementById('modalFlag');
        const modalName = document.getElementById('modalName');
        const modalSubtitle = document.getElementById('modalSubtitle');
        const modalCapital = document.getElementById('modalCapital');
        const modalRegion = document.getElementById('modalRegion');
        const modalPop = document.getElementById('modalPop');
        const modalArea = document.getElementById('modalArea');
        const modalLang = document.getElementById('modalLang');
        const modalCur = document.getElementById('modalCur');

        let debounce;
        const MIN_CHARS = 2;

        // List of flag emojis (for animated background). We'll randomize positions & speeds.
        const FLAG_EMOJIS = [
            "üáßüá∑", "üá∫üá∏", "üáØüáµ", "üá´üá∑", "üá©üá™", "üáÆüá≥", "üá®üá¶", "üá¨üáß", "üáÆüáπ", "üá™üá∏",
            "üá¶üá∫", "üáøüá¶", "üá∞üá∑", "üá≤üáΩ", "üá≥üá±", "üá∏üá™", "üá≥üá¥", "üá®üá≥", "üáπüá∑", "üá∏üá¨",
            "üáµüá≠", "üáµüá±", "üá∏üá¶", "üá¶üá™", "üá®üá≠", "üá¶üá∑", "üá®üá±", "üá®üá¥", "üáµüá™", "üá≥üá¨"
        ];

        // Create animated flag bubbles in background
        (function createFlagBubbles() {
            const bg = document.getElementById('flags-bg');
            const total = 18;
            for (let i = 0; i < total; i++) {
                const span = document.createElement('div');
                span.className = 'flag-bubble';
                // pick emoji
                span.textContent = FLAG_EMOJIS[Math.floor(Math.random() * FLAG_EMOJIS.length)];
                // randomize start position
                span.style.left = (Math.random() * 100) + 'vw';
                span.style.top = (80 + Math.random() * 120) + 'vh'; // start below viewport
                span.style.opacity = 0;
                // random size
                const s = 36 + Math.random() * 34;
                span.style.width = s + 'px';
                span.style.height = s + 'px';
                span.style.fontSize = Math.max(18, s * 0.6) + 'px';
                // random duration & delay
                const dur = 18 + Math.random() * 26;
                const delay = - (Math.random() * dur);
                span.style.animationDuration = dur + 's';
                span.style.animationDelay = delay + 's';
                // random rotation origin
                span.style.borderRadius = (6 + Math.random() * 14) + 'px';
                bg.appendChild(span);
            }
        })();

        // normalize: remove accents & lower
        function normalizeText(t) {
            if (!t) return '';
            return t.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase().trim();
        }

        // show/hide loader
        function showLoader(show) {
            loaderWrap.style.display = show ? 'flex' : 'none';
        }

        // clear results
        function clearResults() {
            resultsEl.innerHTML = '';
            emptyNote.style.display = 'block';
        }

        // show message none found
        function showNone() {
            resultsEl.innerHTML = '<div class="note">Nenhum pa√≠s encontrado üòï ‚Äî tente outro termo.</div>';
            emptyNote.style.display = 'none';
        }

        // create card element
        function makeCard(country) {
            const card = document.createElement('div');
            card.className = 'card';
            // a simple flag representation: prefer emoji if available; fallback to svg flag image when possible
            // Many systems render emoji flags; we'll use emoji flag from region code if possible:
            const flagEmoji = tryEmojiFlag(country.cca2) || country.flag || 'üè≥Ô∏è';
            card.innerHTML = `
        <div class="flag" aria-hidden="true">${flagEmoji}</div>
        <div class="name">${country.name.common}</div>
        <div class="meta">Capital: ${country.capital ? country.capital[0] : 'N/A'}</div>
        <div class="meta">Regi√£o: ${country.region || 'N/A'}</div>
      `;
            // click -> open modal
            card.addEventListener('click', () => openModal(country.name.common));
            return card;
        }

        // attempt to convert cca2 to emoji (works on most modern OS)
        function tryEmojiFlag(cca2) {
            if (!cca2 || cca2.length !== 2) return '';
            const codePoints = [...cca2.toUpperCase()].map(c => 0x1F1E6 - 65 + c.charCodeAt(0));
            return String.fromCodePoint(...codePoints);
        }

        // animate in cascade
        function appendWithCascade(parent, nodes) {
            parent.innerHTML = '';
            nodes.forEach((n, i) => {
                n.style.transitionDelay = (i * 70) + 'ms';
                parent.appendChild(n);
                // small timeout to trigger transform->visible
                requestAnimationFrame(() => {
                    n.classList.add('visible');
                });
            });
        }

        // fetch countries by name (REST Countries)
        async function fetchCountries(q) {
            try {
                showLoader(true);
                const fields = 'name,capital,flags,population,region,cca2,area,languages,currencies,flag';
                const res = await fetch(`https://restcountries.com/v3.1/name/${encodeURIComponent(q)}?fields=${fields}`);
                if (!res.ok) throw new Error('no');
                const data = await res.json();
                showLoader(false);
                emptyNote.style.display = 'none';
                // map to cards
                const nodes = data.map(c => makeCard(c));
                appendWithCascade(resultsEl, nodes);
            } catch (err) {
                showLoader(false);
                showNone();
            }
        }

        // open modal with full details (use fullText to ensure exact)
        async function openModal(nameFull) {
            try {
                modal.setAttribute('aria-hidden', 'false');
                modal.classList.add('show');
                // fetch full data
                const res = await fetch(`https://restcountries.com/v3.1/name/${encodeURIComponent(nameFull)}?fullText=true`);
                if (!res.ok) throw new Error('no');
                const [c] = await res.json();
                // flag emoji or fallback
                modalFlag.textContent = tryEmojiFlag(c.cca2) || (c.flag || 'üè≥Ô∏è');
                modalName.textContent = c.name.common;
                modalSubtitle.textContent = c.name.official || '';
                modalCapital.textContent = c.capital ? c.capital[0] : 'N/A';
                modalRegion.textContent = c.region || 'N/A';
                modalPop.textContent = c.population ? Number(c.population).toLocaleString('pt-BR') : 'N/A';
                modalArea.textContent = c.area ? Number(c.area).toLocaleString('pt-BR') : 'N/A';
                modalLang.textContent = c.languages ? Object.values(c.languages).join(', ') : 'N/A';
                modalCur.textContent = c.currencies ? Object.values(c.currencies).map(x => x.name + (x.symbol ? ` (${x.symbol})` : '')).join(', ') : 'N/A';
                // focus for accessibility
                modalClose.focus();
            } catch (e) {
                // fallback message
                modalName.textContent = nameFull;
                modalSubtitle.textContent = 'Detalhes indispon√≠veis';
            }
        }

        // close modal
        function closeModal() {
            modal.setAttribute('aria-hidden', 'true');
            modal.classList.remove('show');
        }

        // event handlers
        searchInput.addEventListener('input', (e) => {
            const v = normalizeText(e.target.value);
            clearTimeout(debounce);
            if (!v || v.length < MIN_CHARS) {
                clearBtn.style.display = v.length ? 'inline-grid' : 'none';
                clearResults();
                return;
            }
            clearBtn.style.display = 'inline-grid';
            debounce = setTimeout(() => {
                fetchCountries(v);
            }, 360);
        });

        clearBtn.addEventListener('click', () => {
            searchInput.value = '';
            clearBtn.style.display = 'none';
            searchInput.focus();
            clearResults();
        });

        // modal interactions
        modalClose.addEventListener('click', closeModal);
        modal.addEventListener('click', (ev) => {
            if (ev.target === modal) closeModal();
        });
        document.addEventListener('keydown', (ev) => {
            if (ev.key === 'Escape') closeModal();
        });

        // initial hint
        clearResults();

     

    </script>
</body>

</html>